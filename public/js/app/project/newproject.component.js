"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("@angular/core");
var common_1 = require("@angular/common");
var project_service_1 = require("./project.service");
var accordiongroup_component_1 = require("../utility/accordiongroup.component");
var accordion_component_1 = require("../utility/accordion.component");
var project_1 = require("./project");
var employee_service_1 = require("../employee/employee.service");
var query_1 = require("../utility/query");
var router_1 = require("@angular/router");
var NewProjectComponent = (function () {
    function NewProjectComponent(_fb, projectService, _employeeService, _router) {
        this._fb = _fb;
        this.projectService = projectService;
        this._employeeService = _employeeService;
        this._router = _router;
        this.managers = [];
    }
    NewProjectComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.myForm = this._fb.group({
            organization: ['', common_1.Validators.required],
            name: ['', common_1.Validators.required],
            image: ['', common_1.Validators.required],
            manager: ['', common_1.Validators.required]
        });
        this._employeeService.getEmployees(new query_1.Query('canManageProjects', true)).subscribe(function (response) { return _this.managers = response; }, function (error) { return console.log(error); });
    };
    NewProjectComponent.prototype.onSubmit = function () {
        var _this = this;
        var project = new project_1.Project(this.myForm.value.organization, this.myForm.value.name, this.myForm.value.image, this.myForm.value.manager);
        this.projectService.newProject(project).subscribe(function (data) { return _this._router.navigateByUrl('/project/list'); }, function (error) { return console.log(error); });
    };
    NewProjectComponent = __decorate([
        core_1.Component({
            selector: 'my-new-project',
            template: "\n    <form [ngFormModel]=\"myForm\" (ngSubmit)=\"onSubmit()\">\n        <accordion>\n            <accordion-group heading=\"Basic Details\" [isOpen]=\"true\">\n                <div class=\"form-group\">\n                    <label for=\"organization\">Organization</label>\n                    <input type=\"text\" [ngFormControl]=\"myForm.find('organization')\" id=\"organization\" class=\"form-control\"/>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"name\">Project Name:</label>\n                    <input type=\"text\" [ngFormControl]=\"myForm.find('name')\" id=\"name\" class=\"form-control\">\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"Image\">Image</label>\n                    <input type=\"text\" [ngFormControl]=\"myForm.find('image')\" id=\"image\" class=\"form-control\" value=\"/imgs/projectImgs/defaultProjectImage.png\"/>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"Manager\">Manager</label>\n                    <select name=\"Manager\" id=\"manager\" [ngFormControl]=\"myForm.find('manager')\" class=\"form-control\">\n                        <option *ngFor=\"let m of managers\" [value]=\"m._id\">{{m.firstName + \" \"+m.lastName}}</option>\n                    </select>\n                </div>\n            \n            </accordion-group>\n            <accordion-group heading=\"Budget and Scheduling\">\n            \n            </accordion-group>\n            <accordion-group heading=\"Employees\">\n            \n            </accordion-group>\n            <accordion-group heading=\"Documents\">\n            \n            </accordion-group>\n        </accordion>\n        <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\n    </form>\n\n    ",
            directives: [accordion_component_1.AccordionComponent, accordiongroup_component_1.AccordionComponentGroup]
        }), 
        __metadata('design:paramtypes', [common_1.FormBuilder, project_service_1.ProjectService, employee_service_1.EmployeeService, router_1.Router])
    ], NewProjectComponent);
    return NewProjectComponent;
}());
exports.NewProjectComponent = NewProjectComponent;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3QvbmV3cHJvamVjdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHFCQUFnQyxlQUFlLENBQUMsQ0FBQTtBQUNoRCx1QkFBb0QsaUJBQWlCLENBQUMsQ0FBQTtBQUN0RSxnQ0FBNkIsbUJBQW1CLENBQUMsQ0FBQTtBQUNqRCx5Q0FBc0MscUNBQXFDLENBQUMsQ0FBQTtBQUM1RSxvQ0FBaUMsZ0NBQWdDLENBQUMsQ0FBQTtBQUNsRSx3QkFBc0IsV0FBVyxDQUFDLENBQUE7QUFDbEMsaUNBQThCLDhCQUE4QixDQUFDLENBQUE7QUFDN0Qsc0JBQW9CLGtCQUFrQixDQUFDLENBQUE7QUFDdkMsdUJBQXFCLGlCQUFpQixDQUFDLENBQUE7QUEyQ3ZDO0lBR0ksNkJBQW9CLEdBQWUsRUFBUyxjQUE2QixFQUFTLGdCQUFnQyxFQUFTLE9BQWM7UUFBckgsUUFBRyxHQUFILEdBQUcsQ0FBWTtRQUFTLG1CQUFjLEdBQWQsY0FBYyxDQUFlO1FBQVMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFnQjtRQUFTLFlBQU8sR0FBUCxPQUFPLENBQU87UUFEekksYUFBUSxHQUFHLEVBQUUsQ0FBQztJQUM2SCxDQUFDO0lBQzVJLHNDQUFRLEdBQVI7UUFBQSxpQkFXQztRQVZHLElBQUksQ0FBQyxNQUFNLEdBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUM7WUFDdkIsWUFBWSxFQUFDLENBQUMsRUFBRSxFQUFDLG1CQUFVLENBQUMsUUFBUSxDQUFDO1lBQ3JDLElBQUksRUFBQyxDQUFDLEVBQUUsRUFBQyxtQkFBVSxDQUFDLFFBQVEsQ0FBQztZQUM3QixLQUFLLEVBQUMsQ0FBQyxFQUFFLEVBQUMsbUJBQVUsQ0FBQyxRQUFRLENBQUM7WUFDOUIsT0FBTyxFQUFDLENBQUMsRUFBRSxFQUFDLG1CQUFVLENBQUMsUUFBUSxDQUFDO1NBQ25DLENBQUMsQ0FBQTtRQUNGLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLENBQUMsSUFBSSxhQUFLLENBQUMsbUJBQW1CLEVBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQzdFLFVBQUEsUUFBUSxJQUFJLE9BQUEsS0FBSSxDQUFDLFFBQVEsR0FBQyxRQUFRLEVBQXRCLENBQXNCLEVBQ2xDLFVBQUEsS0FBSyxJQUFJLE9BQUEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBbEIsQ0FBa0IsQ0FDOUIsQ0FBQTtJQUNMLENBQUM7SUFDRCxzQ0FBUSxHQUFSO1FBQUEsaUJBTUM7UUFMRyxJQUFJLE9BQU8sR0FBRSxJQUFJLGlCQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksRUFBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbEksSUFBSSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUM3QyxVQUFBLElBQUksSUFBSSxPQUFBLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxFQUEzQyxDQUEyQyxFQUNuRCxVQUFBLEtBQUssSUFBSSxPQUFBLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQWxCLENBQWtCLENBQzlCLENBQUE7SUFDTCxDQUFDO0lBaEVMO1FBQUMsZ0JBQVMsQ0FBQztZQUNQLFFBQVEsRUFBRyxnQkFBZ0I7WUFDM0IsUUFBUSxFQUFDLHcwREFxQ1I7WUFDRCxVQUFVLEVBQUMsQ0FBQyx3Q0FBa0IsRUFBQyxrREFBdUIsQ0FBQztTQUMxRCxDQUFDOzsyQkFBQTtJQXdCRiwwQkFBQztBQUFELENBdkJBLEFBdUJDLElBQUE7QUF2QlksMkJBQW1CLHNCQXVCL0IsQ0FBQSIsImZpbGUiOiJwcm9qZWN0L25ld3Byb2plY3QuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIE9uSW5pdH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHtDb250cm9sR3JvdXAsIEZvcm1CdWlsZGVyLCBWYWxpZGF0b3JzfSBmcm9tIFwiQGFuZ3VsYXIvY29tbW9uXCI7XHJcbmltcG9ydCB7UHJvamVjdFNlcnZpY2V9IGZyb20gXCIuL3Byb2plY3Quc2VydmljZVwiO1xyXG5pbXBvcnQge0FjY29yZGlvbkNvbXBvbmVudEdyb3VwfSBmcm9tIFwiLi4vdXRpbGl0eS9hY2NvcmRpb25ncm91cC5jb21wb25lbnRcIjtcclxuaW1wb3J0IHtBY2NvcmRpb25Db21wb25lbnR9IGZyb20gXCIuLi91dGlsaXR5L2FjY29yZGlvbi5jb21wb25lbnRcIjtcclxuaW1wb3J0IHtQcm9qZWN0fSBmcm9tIFwiLi9wcm9qZWN0XCI7XHJcbmltcG9ydCB7RW1wbG95ZWVTZXJ2aWNlfSBmcm9tIFwiLi4vZW1wbG95ZWUvZW1wbG95ZWUuc2VydmljZVwiO1xyXG5pbXBvcnQge1F1ZXJ5fSBmcm9tIFwiLi4vdXRpbGl0eS9xdWVyeVwiO1xyXG5pbXBvcnQge1JvdXRlcn0gZnJvbSBcIkBhbmd1bGFyL3JvdXRlclwiO1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yIDogJ215LW5ldy1wcm9qZWN0JyxcclxuICAgIHRlbXBsYXRlOmBcclxuICAgIDxmb3JtIFtuZ0Zvcm1Nb2RlbF09XCJteUZvcm1cIiAobmdTdWJtaXQpPVwib25TdWJtaXQoKVwiPlxyXG4gICAgICAgIDxhY2NvcmRpb24+XHJcbiAgICAgICAgICAgIDxhY2NvcmRpb24tZ3JvdXAgaGVhZGluZz1cIkJhc2ljIERldGFpbHNcIiBbaXNPcGVuXT1cInRydWVcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm9yZ2FuaXphdGlvblwiPk9yZ2FuaXphdGlvbjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgW25nRm9ybUNvbnRyb2xdPVwibXlGb3JtLmZpbmQoJ29yZ2FuaXphdGlvbicpXCIgaWQ9XCJvcmdhbml6YXRpb25cIiBjbGFzcz1cImZvcm0tY29udHJvbFwiLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwibmFtZVwiPlByb2plY3QgTmFtZTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIFtuZ0Zvcm1Db250cm9sXT1cIm15Rm9ybS5maW5kKCduYW1lJylcIiBpZD1cIm5hbWVcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJJbWFnZVwiPkltYWdlPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBbbmdGb3JtQ29udHJvbF09XCJteUZvcm0uZmluZCgnaW1hZ2UnKVwiIGlkPVwiaW1hZ2VcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHZhbHVlPVwiL2ltZ3MvcHJvamVjdEltZ3MvZGVmYXVsdFByb2plY3RJbWFnZS5wbmdcIi8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIk1hbmFnZXJcIj5NYW5hZ2VyPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9XCJNYW5hZ2VyXCIgaWQ9XCJtYW5hZ2VyXCIgW25nRm9ybUNvbnRyb2xdPVwibXlGb3JtLmZpbmQoJ21hbmFnZXInKVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gKm5nRm9yPVwibGV0IG0gb2YgbWFuYWdlcnNcIiBbdmFsdWVdPVwibS5faWRcIj57e20uZmlyc3ROYW1lICsgXCIgXCIrbS5sYXN0TmFtZX19PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDwvYWNjb3JkaW9uLWdyb3VwPlxyXG4gICAgICAgICAgICA8YWNjb3JkaW9uLWdyb3VwIGhlYWRpbmc9XCJCdWRnZXQgYW5kIFNjaGVkdWxpbmdcIj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDwvYWNjb3JkaW9uLWdyb3VwPlxyXG4gICAgICAgICAgICA8YWNjb3JkaW9uLWdyb3VwIGhlYWRpbmc9XCJFbXBsb3llZXNcIj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDwvYWNjb3JkaW9uLWdyb3VwPlxyXG4gICAgICAgICAgICA8YWNjb3JkaW9uLWdyb3VwIGhlYWRpbmc9XCJEb2N1bWVudHNcIj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDwvYWNjb3JkaW9uLWdyb3VwPlxyXG4gICAgICAgIDwvYWNjb3JkaW9uPlxyXG4gICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+U3VibWl0PC9idXR0b24+XHJcbiAgICA8L2Zvcm0+XHJcblxyXG4gICAgYCxcclxuICAgIGRpcmVjdGl2ZXM6W0FjY29yZGlvbkNvbXBvbmVudCxBY2NvcmRpb25Db21wb25lbnRHcm91cF1cclxufSlcclxuZXhwb3J0IGNsYXNzIE5ld1Byb2plY3RDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXR7XHJcbiAgICBteUZvcm06Q29udHJvbEdyb3VwO1xyXG4gICAgbWFuYWdlcnMgPSBbXTtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX2ZiOkZvcm1CdWlsZGVyLHByaXZhdGUgcHJvamVjdFNlcnZpY2U6UHJvamVjdFNlcnZpY2UscHJpdmF0ZSBfZW1wbG95ZWVTZXJ2aWNlOkVtcGxveWVlU2VydmljZSxwcml2YXRlIF9yb3V0ZXI6Um91dGVyKXt9XHJcbiAgICBuZ09uSW5pdCgpe1xyXG4gICAgICAgIHRoaXMubXlGb3JtPXRoaXMuX2ZiLmdyb3VwKHtcclxuICAgICAgICAgICAgb3JnYW5pemF0aW9uOlsnJyxWYWxpZGF0b3JzLnJlcXVpcmVkXSxcclxuICAgICAgICAgICAgbmFtZTpbJycsVmFsaWRhdG9ycy5yZXF1aXJlZF0sXHJcbiAgICAgICAgICAgIGltYWdlOlsnJyxWYWxpZGF0b3JzLnJlcXVpcmVkXSxcclxuICAgICAgICAgICAgbWFuYWdlcjpbJycsVmFsaWRhdG9ycy5yZXF1aXJlZF1cclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX2VtcGxveWVlU2VydmljZS5nZXRFbXBsb3llZXMobmV3IFF1ZXJ5KCdjYW5NYW5hZ2VQcm9qZWN0cycsdHJ1ZSkpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgcmVzcG9uc2UgPT4gdGhpcy5tYW5hZ2Vycz1yZXNwb25zZSxcclxuICAgICAgICAgICAgZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG4gICAgb25TdWJtaXQoKXtcclxuICAgICAgICB2YXIgcHJvamVjdD0gbmV3IFByb2plY3QodGhpcy5teUZvcm0udmFsdWUub3JnYW5pemF0aW9uLHRoaXMubXlGb3JtLnZhbHVlLm5hbWUsdGhpcy5teUZvcm0udmFsdWUuaW1hZ2UsdGhpcy5teUZvcm0udmFsdWUubWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0U2VydmljZS5uZXdQcm9qZWN0KHByb2plY3QpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgZGF0YSA9PiB0aGlzLl9yb3V0ZXIubmF2aWdhdGVCeVVybCgnL3Byb2plY3QvbGlzdCcpLFxyXG4gICAgICAgICAgICBlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICApXHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
